<!DOCTYPE html>

<html>
<head>
  <title>offliner-source-cache.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../docco.css" />
</head>
<body>
<div id="container">
  <table cellspacing="0" cellpadding="0">
    <thead>
    <tr>
      <th class="docs">
        
        <h1><a href="../index.html" title="Back to index">&larr;</a>&nbsp;&nbsp;offliner-source-cache.js</h1>
        
      </th>
      <th class="code"></th>
    </tr>
    </thead>
    <tbody>
    
    
    <tr id="section-1">
      <td class="docs">
        <div class="octowrap">
          <a class="octothorpe" href="#section-1">#</a>
        </div>
      <p># How to write an offline source
 Remember including offliner will export the <code>off</code> module with a namespace
 reserved for <code>sources</code>. Put your source inside.</p>
      </td>
      <td class="code">
      <pre><code >
</code></pre>
      </td>
    </tr>
    
    
    <tr id="section-2">
      <td class="docs">
        <div class="octowrap">
          <a class="octothorpe" href="#section-2">#</a>
        </div>
      <p>A source is a function that will be passed with a request and the active
 offline cache. The source must return a promise resolving with the proper
 response or rejecting when response is not available.</p>
      </td>
      <td class="code">
      <pre><code ><span class="transposed_variable">self.</span><span class="transposed_variable">off.</span><span class="transposed_variable">sources.</span>cache = <span class="function"><span class="keyword">function</span> <span class="params">(request, activeCache)</span> {</span>
  <span class="keyword">return</span> <span class="transposed_variable">activeCache.</span>match(request).then(<span class="function"><span class="keyword">function</span> <span class="params">(response)</span> {</span>

    </code></pre>
      </td>
    </tr>
    
    
    <tr id="section-3">
      <td class="docs">
        <div class="octowrap">
          <a class="octothorpe" href="#section-3">#</a>
        </div>
      <p>Notice how we resolve with the response if there is a match in the
 cache of reject otherwise.</p>
      </td>
      <td class="code">
      <pre><code >    return response ? Promise<span class="preprocessor">.resolve</span>(response) : Promise<span class="preprocessor">.reject</span>()<span class="comment">;</span>
  })<span class="comment">;</span>
}<span class="comment">;</span>
</code></pre>
      </td>
    </tr>
    
  </table>
</div>
</body>
</html>



